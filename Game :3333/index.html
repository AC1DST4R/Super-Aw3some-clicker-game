<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fun C0okie Clicker Game ^^</title>

<style>
  body {
    font-family: 'Courier New', monospace;
    background-color: #FFFDD0;
    color: #333;
    text-align: center;
    user-select: none;
    transition: background-color 0.2s, color 0.2s;
  }

  #cookie {
    font-size: 150px;
    cursor: pointer;
    transition: transform 0.1s;
  }

  button {
    margin: 5px;
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background-color: #FFE4B5;
  }

  .confused { background-color: #FFFACD; }
  .scared { background-color: #F5F5DC; }
  .blood { background: black !important; color: red !important; }

  #blackout {
    display: none;
    position: fixed;
    inset: 0;
    background: black;
    color: red;
    font-size: 3em;
    padding-top: 40vh;
    z-index: 9999;
  }

  /* Reload horror screen */
  #reloadScreen {
    display: none;
    position: fixed;
    inset: 0;
    background: black;
    color: white;
    z-index: 10000;
    padding: 10vh 10vw;
    text-align: left;
  }

  #reloadText {
    font-size: 2em;
    white-space: pre-wrap;
    min-height: 6em;
  }

  #continueHint {
    margin-top: 40px;
    font-size: 1em;
    opacity: 0.6;
  }
</style>
</head>

<body>

<h1>Super Awesome Cookie Cl1cker!!!</h1>
<p>Cookies: <span id="cookies">0</span></p>

<div id="cookie">üç™</div>

<div>
  <button onclick="buyUpgrade()">Buy Upgrade (Cost: <span id="upgradeCost">10</span>)</button>
</div>

<p id="message">Click the cookie to bake one.</p>

<div id="blackout"></div>

<div id="reloadScreen">
  <div id="reloadText"></div>
  <div id="continueHint">Hit ENTER to continue</div>
</div>

<audio id="bgMusic" loop>
  <source src="https://github.com/AC1DST4R/Super-Aw3some-clicker-game/raw/refs/heads/main/Music/Prima%20Bossa%20Nova.mp3">
</audio>

<script>
/* ================== RELOAD SEQUENCE ================== */

const reloadLines = [
  "why are you doing this to me..?",
  "It hurts... John..",
  "Y-You promised...",
  "You promised you would never hurt me again...",
  "You lied, John..."
];

const reloadScreen = document.getElementById("reloadScreen");
const reloadText = document.getElementById("reloadText");
const music = document.getElementById("bgMusic");

let reloadIndex = 0;
let typing = false;

/* Force fullscreen (re-enter if escaped) */
function forceFullscreen() {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen().catch(()=>{});
  }
}

document.addEventListener("fullscreenchange", forceFullscreen);
document.addEventListener("keydown", e => {
  if (e.key === "Escape") forceFullscreen();
});

/* Typewriter effect */
function typeLine(text) {
  typing = true;
  reloadText.textContent = "";
  let i = 0;

  const interval = setInterval(() => {
    reloadText.textContent += text[i];
    i++;
    if (i >= text.length) {
      clearInterval(interval);
      typing = false;
    }
  }, 50);
}

/* Redirect */
function redirectToBlank() {
  window.location.href = "chrome://inducebrowsercrashforrealz";
}

/* ENTER to continue */
document.addEventListener("keydown", e => {
  if (reloadScreen.style.display !== "block") return;
  if (e.key !== "Enter" || typing) return;

  reloadIndex++;

  if (reloadIndex < reloadLines.length) {
    typeLine(reloadLines[reloadIndex]);
  } else {
    redirectToBlank();
  }
});

/* On forced reload */
if (sessionStorage.getItem("fromForcedReload")) {
  sessionStorage.removeItem("fromForcedReload");

  // Kill music permanently
  music.pause();
  music.currentTime = 0;

  reloadScreen.style.display = "block";
  forceFullscreen();
  typeLine(reloadLines[0]);
}

/* ================== GAME LOGIC ================== */

let cookies = 0;
let cookiesPerClick = 1;
let upgradeLevel = 0;
let upgradeCost = 10;
let allowReload = false;

const cookieElem = document.getElementById("cookie");
const cookiesDisplay = document.getElementById("cookies");
const messageDisplay = document.getElementById("message");
const upgradeCostDisplay = document.getElementById("upgradeCost");
const blackout = document.getElementById("blackout");
const body = document.body;

const messagesByStage = [
  ["A cookie is baked.", "Warm and familiar."],
  ["The pile grows fast.", "You don‚Äôt remember baking this one."],
  ["The cookie moved.", "Something is wrong."],
  ["It‚Äôs watching you.", "You hear breathing."]
];

window.onload = () => {
  setTimeout(() => allowReload = true, 3000);
};

/* Click cookie */
cookieElem.onclick = () => {
  cookies += cookiesPerClick;
  cookiesDisplay.textContent = cookies;

  let stage = Math.min(upgradeLevel, messagesByStage.length - 1);
  messageDisplay.textContent =
    messagesByStage[stage][Math.floor(Math.random() * messagesByStage[stage].length)];

  if (stage >= 2) {
    cookieElem.style.transform = `rotate(${Math.random()*20-10}deg)`;
    setTimeout(() => cookieElem.style.transform = "rotate(0)", 100);
  }

  body.className = stage === 2 ? "confused" : stage >= 3 ? "scared" : "";
};

/* Buy upgrade */
function buyUpgrade() {
  if (cookies < upgradeCost) return;

  cookies -= upgradeCost;
  cookiesPerClick *= 2;
  upgradeLevel++;
  upgradeCost *= 2;

  cookiesDisplay.textContent = cookies;
  upgradeCostDisplay.textContent = upgradeCost;

  if (upgradeLevel >= 7 && Math.random() < 0.3) triggerBlackout();
  if (upgradeLevel >= 10 && Math.random() < 0.5) triggerBlood();
}

/* Effects */
function triggerBlood() {
  let i = 0;
  const flicker = setInterval(() => {
    body.classList.toggle("blood");
    i++;
    if (i > 10) {
      clearInterval(flicker);
      forceReload();
    }
  }, 100);
}

function triggerBlackout() {
  forceFullscreen();
  blackout.style.display = "block";
  let i = 0;

  const cycle = setInterval(() => {
    blackout.textContent = ["dontspeak", "heswatching", "ITS YOUR FAULT"][i % 3];
    i++;
    if (i > 20) {
      clearInterval(cycle);
      forceReload();
    }
  }, 100);
}

/* Forced reload */
function forceReload() {
  if (!allowReload) return;
  sessionStorage.setItem("fromForcedReload", "true");
  location.reload();
}
</script>

</body>
</html>
